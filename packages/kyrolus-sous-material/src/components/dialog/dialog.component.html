
@if(open()){
  @if(config().hasBackdrop){
    <div ksBackDrop [(show)]="open" [zIndex]="1" (BackdropClick)="backdropClicked($event)"></div>
  }

<dialog
  [ksDraggable]="config().draggable"
  [@fadeInOut]
  class="dialog-container"
  [class]="config().panelClass"
  (click)="$event.stopPropagation()"
  (keydown)="$event.stopPropagation()"
  [style.width]="config().width"
  [style.height]="config().height"
  [attr.aria-labelledby]="id()"
  [attr.aria-modal]="true"
>
  @if(config().draggable){
    <div [class.draggable]="config().draggable" [style.height.px]="20"></div>
  }
  @if(freeStyleDialogTemplate() || config().freeStyleDialogTemplate){
  <ng-container
    [ngTemplateOutlet]="config().freeStyleDialogTemplate || freeStyleDialogTemplate()"
  ></ng-container>
  }@else {
    <!--  -->
    @if(!this.opendProgrammatically()){
     <ng-content select="ks-dialog-header"></ng-content>
      @if( componentContentType() != null){
        <ng-container [ngComponentOutlet]="componentContentType()"></ng-container>
      }@if(config().contentTemplate){
        <ng-container [ngTemplateOutlet]="config().contentTemplate"></ng-container>
      }
      @else {
        <ng-content select="ks-dialog-content"></ng-content>
      }
     <ng-content select="ks-dialog-actions"></ng-content>
    } @else {
      <!--  -->
      @if(config().title){
        <ks-dialog-header>
          <span ksDialogTitle> {{ config().title }} </span>
        </ks-dialog-header>
      }
      <!--  -->
      <ks-dialog-content>
        @if(this.contentComponent()?.componentType != null){
        <ng-container
          [ngComponentOutlet]="this.contentComponent()?.componentType || null"
        ></ng-container>
        }
        @else if(this.config().contentTemplate){
        <ng-container
          [ngTemplateOutlet]="this.config().contentTemplate"
        ></ng-container>
        }
      </ks-dialog-content>
      @if(config().useActionButton){
        <ks-dialog-actions>
          <button ksButton size="sm" appearance="custom" (click)="close()" class="close-button">
            Close
          </button>

          <button ksButton size="sm" appearance="primary" (click)="close(result())">
            {{ config().actionButtonText}}
          </button>
        </ks-dialog-actions>
      }
    }
  }
  <div class="resize-handle"></div>
</dialog>
}
